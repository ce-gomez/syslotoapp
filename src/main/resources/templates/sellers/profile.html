<!DOCTYPE html>
<html lang="es" th:replace="~{layouts/base :: layout(~{::title}, ~{::section})}">

<head>
    <meta charset="UTF-8">
    <title>Vendedores</title>
</head>

<body>
    <section class="flex flex-col grow mb-4 mr-4 overflow-hidden min-h-0">
        <th:block th:if="${selectedSeller != null}">
            <div class="flex flex-col flex-1 rounded-3xl bg-surface overflow-hidden min-h-0">
                <div class="flex flex-col flex-1 w-full md:w-3/5 min-h-0">
                    <header class="flex flex-col gap-3 px-1 py-2">
                        <div class="flex items-center justify-between">
                            <a th:href="@{/sellers/{id}/sales(id=${sellerId})}">
                                <button th:replace="~{fragments/iconButton :: icon-button('arrow_back')}"></button>
                            </a>
                            <div class="flex gap-2">
                                <form th:action="@{/sellers/delete/{id}(id=${selectedSeller.sellerId})}" method="POST"
                                    onsubmit="return confirm('¿Estás seguro de que deseas eliminar este vendedor? Esta acción no se puede deshacer.');">
                                    <button type="submit"
                                        th:replace="~{fragments/iconButton :: icon-button('delete')}"></button>
                                </form>
                                <button th:replace="~{fragments/iconButton :: icon-button('more_vert')}"></button>
                                <button type="submit" form="seller-edit"
                                    class="flex items-center gap-2 px-6 py-3 rounded-full bg-primary text-on-primary hover:opacity-95 transition-colors">
                                    <span class="text-label-large">Guardar</span>
                                </button>
                            </div>
                        </div>
                        <h2 class="text-headline-medium px-4">
                            <span th:text="${selectedSeller.name} + ' ' + ${selectedSeller.lastname}">Name</span>
                        </h2>
                    </header>

                    <form id="seller-edit" method="POST"
                        th:action="@{/sellers/edit/{id}(id=${selectedSeller.sellerId})}"
                        class="flex flex-col flex-1 px-4 gap-3 w-full overflow-y-auto pb-10">
                        <div class="flex flex-col gap-1">
                            <label for="name" class="text-body-medium text-on-surface-variant">Nombre</label>
                            <input type="text" id="name" name="name" th:value="${selectedSeller.name}" required
                                class="flex px-4 py-3 text-body-large border text-on-surface placeholder:text-on-surface-variant border-outline rounded-sm outline-none focus:ring-2 focus:ring-primary focus:border-primary w-full"
                                placeholder="Ingrese el nombre" />
                        </div>

                        <div class="flex flex-col gap-1">
                            <label for="lastname" class="text-body-medium text-on-surface-variant">Apellido</label>
                            <input type="text" id="lastname" name="lastname" th:value="${selectedSeller.lastname}"
                                required
                                class="flex px-4 py-3 text-body-large border text-on-surface placeholder:text-on-surface-variant border-outline rounded-sm outline-none focus:ring-2 focus:ring-primary focus:border-primary w-full"
                                placeholder="Ingrese el apellido" />
                        </div>

                        <div class="flex flex-col">
                            <label for="factor" class="text-body-medium text-on-surface-variant">Factor</label>
                            <input type="number" id="factor" name="factor" th:value="${selectedSeller.factor}"
                                step="0.01" min="0" required
                                class="flex px-4 py-3 text-body-large border text-on-surface placeholder:text-on-surface-variant border-outline rounded-sm outline-none focus:ring-2 focus:ring-primary focus:border-primary w-full"
                                placeholder="Ej: 0.20" />
                        </div>
                    </form>
                </div>
            </div>
        </th:block>

        <th:block th:if="${selectedSeller == null}">
            <div
                th:replace="~{layouts/emptyPane :: empty-pane('No hay vendedor seleccionado.', 'Selecciona un vendedor para editar su información.')}">
            </div>
        </th:block>
    </section>
</body>

</html>